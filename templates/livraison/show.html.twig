{% extends is_granted('ROLE_ADMIN') ? 'base_admin.html.twig' : 'base.html.twig' %}

{% block title %}Delivery Details{% endblock %}

{% block body %}
    <div class="container">
        <h1>Delivery Details</h1>
        <table class="table">
            <tbody>
                <tr><th>Address</th><td>{{ livraison.adresse }}</td></tr>
                <tr><th>Date</th><td>{{ livraison.dateLivraison ? livraison.dateLivraison|date('Y-m-d') : '' }}</td></tr>
                <tr><th>Status</th><td>{{ livraison.statut ? 'Processed' : 'Pending' }}</td></tr>
            </tbody>
        </table>

        {% if (is_granted('ROLE_AGRICULTEUR') or is_granted('ROLE_CLIENT')) and livraison.commande.client == app.user %}
            {% if not livraison.statut %}
                <div class="action-buttons">
                    <a href="{{ path('app_livraison_edit', {'id': livraison.id}) }}" 
                       class="btn btn-primary">Modify Delivery</a>
                </div>
            {% endif %}
        {% endif %}
    </div>
{% endblock %}
