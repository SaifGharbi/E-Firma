<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Admin Panel{% endblock %}</title>

    <!-- Meta Tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="ColorlibHQ" />
    <meta name="description" content="AdminLTE - Free Bootstrap 5 Admin Dashboard" />

    <!-- Fonts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css" crossorigin="anonymous"/>

    <!-- OverlayScrollbars -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/styles/overlayscrollbars.min.css" crossorigin="anonymous"/>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" crossorigin="anonymous"/>

    <!-- AdminLTE CSS -->
    <link rel="stylesheet" href="{{ asset('backoffice/css/adminlte.css') }}" />

    {% block styles %}{% endblock %}
</head>
<body class="layout-fixed sidebar-expand-lg bg-body-tertiary">

<!-- Wrapper -->
<div class="app-wrapper">

    <!-- Header -->
    <nav class="app-header navbar navbar-expand bg-body">
        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
                        <i class="bi bi-list"></i>
                    </a>
                </li>
                <li class="nav-item d-none d-md-block"><a href="{{ path('admin_dashboard') }}" class="nav-link">Home</a></li>
            </ul>

            <ul class="navbar-nav ms-auto">
    <li class="nav-item dropdown user-menu">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
        <img src="{{ asset('backoffice/assets/img/user2-160x160.jpg') }}" 
             class="user-image rounded-circle shadow" alt="User Image"/>
        <span class="d-none d-md-inline">
            {{ app.user ? app.user.nom : 'Invité' }}
        </span>
    </a>
    
    <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
        <!-- User info -->
        <li class="user-header bg-primary text-center p-3">
            <img src="{{ asset('backoffice/assets/img/user2-160x160.jpg') }}" 
                 class="rounded-circle shadow mb-2" alt="User Image"/>
            <p class="mb-0">{{ app.user ? app.user.nom : 'Invité' }}</p>
            <small class="text-light">
                {% if app.user %}
                    {{ app.user.roles[0] == 'ROLE_ADMIN' ? 'Administrateur' : 'Utilisateur' }}
                {% else %}
                    Non connecté
                {% endif %}
            </small>
        </li>

        <!-- Dropdown items -->
        <li class="user-footer d-flex justify-content-between p-2">
            <a href="#" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-person-circle"></i> Profile
            </a>
            <a href="{{ path('app_logout') }}" class="btn btn-outline-danger btn-sm">
                <i class="bi bi-box-arrow-right"></i> Sign out
            </a>
        </li>
    </ul>
</li>

</ul>

        </div>
    </nav>

    <!-- Sidebar -->
    <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">
        <div class="sidebar-brand">
            <a href="{{ path('admin_dashboard') }}" class="brand-link">
                <img src="{{ asset('backoffice/assets/img/AdminLTELogo.png') }}" alt="AdminLTE Logo" class="brand-image opacity-75 shadow"/>
                <span class="brand-text fw-light">E-Firma Admin</span>
            </a>
        </div>

        <div class="sidebar-wrapper">
    <nav class="mt-2">
        <ul class="nav sidebar-menu flex-column">

            <!-- Users Management -->
            <li class="nav-header text-uppercase font-weight-bold">Gestion des Utilisateurs</li>
            <li class="nav-item">
                <a href="{{ path('admin_users') }}" class="nav-link">
                    <i class="nav-icon bi bi-people-fill"></i>
                    <p>Utilisateurs</p>
                </a>
            </li>

            <!-- Products & Categories -->
            <li class="nav-header text-uppercase font-weight-bold">Gestion des Produits</li>
            <li class="nav-item">
                <a href="{{ path('app_produit_index_admin') }}" class="nav-link">
                    <i class="nav-icon bi bi-box-seam"></i>
                    <p>Produits</p>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('app_produit_categorie_index') }}" class="nav-link">
                    <i class="nav-icon bi bi-tags"></i>
                    <p>Catégories de Produits</p>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('app_produit_stats') }}" class="nav-link">
                    <i class="nav-icon bi bi-bar-chart-line"></i>
                    <p>Statistiques Produits</p>
                </a>
            </li>

            <!-- Parcelles & Cultures -->
            <li class="nav-header text-uppercase font-weight-bold">Gestion des Parcelles & Cultures</li>
            <li class="nav-item">
                <a href="{{ path('app_parcelle_index') }}" class="nav-link">
                    <i class="nav-icon bi bi-tree-fill"></i>
                    <p>Parcelles</p>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('app_culture_parcelle_index') }}" class="nav-link">
                    <i class="nav-icon bi bi-flower1"></i>
                    <p>Culture Parcelle</p>
                </a>
            </li>

            <!-- Orders & Deliveries -->
            <li class="nav-header text-uppercase font-weight-bold">Gestion des Commandes & Livraisons</li>
            <li class="nav-item">
                <a href="{{ path('app_admin_orders') }}" class="nav-link">
                    <i class="nav-icon bi bi-cart-check"></i>
                    <p>Commandes</p>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('app_livraison_index') }}" class="nav-link">
                    <i class="nav-icon bi bi-truck"></i>
                    <p>Livraisons</p>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('app_stats_top') }}" class="nav-link">
                    <i class="nav-icon bi bi-graph-up"></i>
                    <p>Statistiques Commandes</p>
                </a>
            </li>

            <!-- Services & Appointments -->
            <li class="nav-header text-uppercase font-weight-bold">Gestion des Services & Rendez-vous</li>
            <li class="nav-item">
                <a href="{{ path('app_service_index_manage') }}" class="nav-link">
                    <i class="nav-icon bi bi-wrench"></i>
                    <p>Gérer Services</p>
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('app_service_rendez_vous_stats') }}" class="nav-link">
                    <i class="nav-icon bi bi-calendar-check"></i>
                    <p>Statistiques Rendez-vous</p>
                </a>
            </li>
        </ul>
    </nav>
</div>

    </aside>

    <!-- Main Content -->
    <main class="app-main">
        <div class="app-content-header">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-6"><h3 class="mb-0">{% block page_title %}Dashboard{% endblock %}</h3></div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-end">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active">{% block breadcrumb %}Dashboard{% endblock %}</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div class="app-content">
            <div class="container-fluid">
                {% block body %}{% endblock %}
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="float-end d-none d-sm-inline">E-Firma Admin Panel</div>
        <strong>Copyright &copy; 2024 <a href="#">E-Firma</a>.</strong> All rights reserved.
    </footer>
</div>

<!-- JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/browser/overlayscrollbars.browser.es6.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
<script src="{{ asset('backoffice/js/adminlte.js') }}"></script>

{% block scripts %}{% endblock %}
</body>
</html>
